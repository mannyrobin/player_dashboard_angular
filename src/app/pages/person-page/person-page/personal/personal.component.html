<div class="row">
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <div class="form-group p-1">
      <label for="lastName">{{'persons.person.personal.lastName' | translate}}</label>
      <dx-text-box id="lastName"
                   [(value)]="person.lastName"
                   [readOnly]="!isEditAllow">
        <dx-validator>
          <dxi-validation-rule type="required"></dxi-validation-rule>
        </dx-validator>
      </dx-text-box>
    </div>
  </div>
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <div class="form-group p-1">
      <label for="firstName">{{'persons.person.personal.firstName' | translate}}</label>
      <dx-text-box id="firstName"
                   [(value)]="person.firstName"
                   [readOnly]="!isEditAllow">
        <dx-validator>
          <dxi-validation-rule type="required"></dxi-validation-rule>
        </dx-validator>
      </dx-text-box>
    </div>
  </div>
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <div class="form-group p-1">
      <label for="middleName">{{'persons.person.personal.middleName' | translate}}</label>
      <dx-text-box id="middleName"
                   [(value)]="person.patronymic"
                   [showClearButton]="true"
                   [readOnly]="!isEditAllow">
      </dx-text-box>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <div class="form-group p-1">
      <label for="birthDate">{{'persons.person.personal.birthDate' | translate}}</label>
      <dx-date-box id="birthDate"
                   [(value)]="person.birthDate"
                   type="date"
                   class="w-100"
                   [readOnly]="!isEditAllow">
        <dx-validator>
          <dxi-validation-rule type="required"></dxi-validation-rule>
        </dx-validator>
      </dx-date-box>
    </div>
  </div>
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <div class="form-group p-1">
      <label for="sex">{{'persons.person.personal.sex' | translate}}</label>
      <dx-select-box id="sex"
                     [items]="sexEnumValues"
                     [(value)]="person.sex"
                     [readOnly]="!isEditAllow">
        <dx-validator>
          <dxi-validation-rule type="required"></dxi-validation-rule>
        </dx-validator>
      </dx-select-box>
    </div>
  </div>
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <div class="form-group p-1">
      <label>{{'baseUserRole' | translate}}</label>
      <dx-select-box [items]="userRoles"
                     [(value)]="baseUserRole"
                     displayExpr="name"
                     acceptCustomValue="true"
                     showClearButton="true"
                     [readOnly]="!isEditAllow">
      </dx-select-box>
    </div>
  </div>
</div>
<div class="row" *ngIf="person.address">
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <label for="country">{{'persons.person.personal.country' | translate}}</label>
    <app-input-select
      id="country"
      [loadData]="loadCountries"
      [(model)]="person.address.country"
      [pageSize]="pageSize"
      [disabled]="!isEditAllow"
      (onChange)="onCountryChange($event)"
      [getKey]="getKey"
      [getName]="getName"
      placeholder="Select a country"
      ngDefaultControl>
    </app-input-select>
  </div>
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <label for="region">{{'persons.person.personal.region' | translate}}</label>
    <app-input-select
      id="region"
      [loadData]="loadRegions"
      [(model)]="person.address.region"
      [pageSize]="pageSize"
      [disabled]="!isEditAllow || person.address.country == null"
      (onChange)="onRegionChange($event)"
      [getKey]="getKey"
      [getName]="getName"
      placeholder="Select a region"
      ngDefaultControl>
    </app-input-select>
  </div>
  <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
    <label for="city">{{'persons.person.personal.city' | translate}}</label>
    <app-input-select
      id="city"
      [loadData]="loadCities"
      [(model)]="person.address.city"
      [pageSize]="pageSize"
      [disabled]="!isEditAllow || person.address.region == null"
      [getKey]="getKey"
      [getName]="getName"
      placeholder="Select a city"
      ngDefaultControl>
    </app-input-select>
  </div>
</div>
<button *ngIf="isEditAllow"
        type="button"
        class="btn btn-outline-success btn-sm mt-3"
        (click)="savePersonal()">{{'persons.person.save' | translate}}
</button>
