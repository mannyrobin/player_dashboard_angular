<div class="row cols-padding">
  <div class="col">
    <dx-text-box #searchDxTextBoxComponent
                 placeholder="{{'search' | translate}}"
                 mode="search"
                 showClearButton="true">
    </dx-text-box>
  </div>
  <div class="col">
    <dx-date-box class="w-100"
                 type="date"
                 placeholder="{{'yearBirth' | translate}}"
                 showClearButton="true"
                 displayFormat="year"
                 maxZoomLevel="decade"
                 minZoomLevel="century"
                 (onValueChanged)="onYearBirthChanged($event.value)">
    </dx-date-box>
  </div>
  <div class="col">
    <dx-select-box [items]="sexItems"
                   displayExpr="name"
                   acceptCustomValue="true"
                   showClearButton="true"
                   placeholder="{{'sex' | translate}}"
                   (onSelectionChanged)="onSexChanged($event.selectedItem)">
    </dx-select-box>
  </div>
  <div class="col">
    <dx-select-box [items]="userRoles"
                   displayExpr="name"
                   acceptCustomValue="true"
                   showClearButton="true"
                   (onSelectionChanged)="onUserRoleChanged($event.selectedItem)"
                   placeholder="{{'userRole' | translate}}">
    </dx-select-box>
  </div>
  <div class="col">
    <app-input-select [loadData]="loadGroups"
                      [pageSize]="pageSize"
                      [getKey]="getKey"
                      [getName]="getName"
                      placeholder="{{'group' | translate}}"
                      ngDefaultControl
                      (onChange)="onGroupChanged($event.current)">
    </app-input-select>
  </div>
  <div class="col">
    <app-input-select [loadData]="loadSportTypes"
                      [pageSize]="pageSize"
                      [getKey]="getKey"
                      [getName]="getName"
                      placeholder="{{'sportType' | translate}}"
                      ngDefaultControl
                      (onChange)="onSportTypeChanged($event.current)">
    </app-input-select>
  </div>
  <div class="col">
    <app-input-select [loadData]="loadCities"
                      [pageSize]="pageSize"
                      [getKey]="getKey"
                      [getName]="getName"
                      placeholder="{{'city' | translate}}"
                      ngDefaultControl
                      (onChange)="onCityChanged($event.current)">
    </app-input-select>
  </div>
  <div class="col">
    <dx-check-box *ngIf="!isOwner"
                  [(value)]="personQuery.template"
                  (valueChange)="updateItems()"
                  text="{{'personTemplate' | translate}}">
    </dx-check-box>
  </div>
  <app-btn-add *ngIf="canCreatePerson" [onClick]="createPerson"></app-btn-add>
</div>

<table class="table table-hover mt-2">
  <thead>
  <tr class="d-flex">
    <th class="col-1">{{'image' | translate}}</th>
    <th class="col-4">{{'fullName' | translate}}</th>
    <th class="col-2">{{'yearBirth' | translate}}</th>
    <th class="col-2">{{'role' | translate}}</th>
    <th class="col-3">{{'group' | translate}}</th>
  </tr>
  </thead>
  <tbody>
  <ngx-virtual-scroll class="list-group-flush"
                      [getItems]="getItems"
                      [(query)]="personQuery"
                      windowScroll="true">
    <ng-template let-item>
      <tr class="d-flex" routerLink="{{item.data.id}}">
        <td class="col-1">
          <app-image [type]="'LOGO'"
                     [clazz]="'PERSON'"
                     [id]="item.data.id"
                     [dimension]="'W80xH80'"
                     [format]="'CIRCLE'"></app-image>
        </td>
        <td class="col-4">
          <h5>{{item.data?.firstName}}<br>
            {{item.data?.lastName}}<br>
            {{item.data?.patronymic}}</h5>
        </td>
        <td class="col-2">
          <h5>{{item.data?.birthDate | date:'yyyy'}}</h5>
        </td>
        <td class="col-2">
          <h5>{{item.baseUserRole?.name}}</h5>
        </td>
        <td class="col-3">
          <app-group *ngIf="item.baseGroupViewModel"
                     [data]="item.baseGroupViewModel.data"></app-group>
        </td>
      </tr>
    </ng-template>
  </ngx-virtual-scroll>
  </tbody>
</table>
