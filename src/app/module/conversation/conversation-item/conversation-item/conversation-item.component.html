<!--<div class="d-flex w-100 p-2"-->
     <!--(click)="openConversation()">-->

  <!--<app-image-->
    <!--#logo-->
    <!--*ngIf="conversation"-->
    <!--[type]="'LOGO'"-->
    <!--[clazz]="conversationImageClazz"-->
    <!--[id]="conversationImageId"-->
    <!--[dimension]="'W80xH80'"-->
    <!--[format]="'CIRCLE'"></app-image>-->

  <!--<div class="d-flex flex-column w-100 ml-2">-->
    <!--<div class="d-flex">-->
      <!--<p class="name">{{conversationName}}</p>-->
      <!--<p class="date ml-auto" *ngIf="!conversationWrapper.messageWrapper.empty">-->
        <!--{{updated ? (('edited' | translate | lowercase) + ' ' + (updated | date:'dd.MM.yyyy HH:mm') )-->
        <!--: (conversationWrapper.messageWrapper.message.created | date:'dd.MM.yyyy HH:mm')}}-->
      <!--</p>-->
    <!--</div>-->

    <!--<div class="d-flex flex-row align-items-center p-2">-->

      <!--<div *ngIf="conversationWrapper.typingParticipants.length; else message"-->
           <!--class="text-typing">-->
        <!--<div *ngIf="conversationWrapper.typingParticipants.length == 1;else multiTyping">-->
          <!--{{conversationWrapper.typingParticipants[0].person.firstName}} {{'isTypingAMessage' | translate |-->
          <!--lowercase}}-->
        <!--</div>-->
        <!--<ng-template #multiTyping>-->
          <!--<div *ngFor="let item of conversationWrapper.typingParticipants">-->
            <!--{{item.person.firstName}},-->
          <!--</div>-->
          <!--{{'areTypingMessages' | translate | lowercase}}-->
        <!--</ng-template>-->
      <!--</div>-->

      <!--<ng-template #message>-->
        <!--<div-->
          <!--*ngIf="!conversationWrapper.messageWrapper.empty && conversationWrapper.messageWrapper.message.content.discriminator == 'MESSAGE_CONTENT' && senderPerson"-->
          <!--class="mr-2">-->
          <!--<app-image [type]="'LOGO'"-->
                     <!--[clazz]="'PERSON'"-->
                     <!--[id]="senderPerson.id"-->
                     <!--[dimension]="'W40xH40'"-->
                     <!--[format]="'CIRCLE'"></app-image>-->
        <!--</div>-->
        <!--<div *ngIf="!conversationWrapper.messageWrapper.empty"-->
             <!--class="message">-->
          <!--<app-message-item [message]="conversationWrapper.messageWrapper.message"-->
                            <!--[previewContent]="true"></app-message-item>-->
        <!--</div>-->
      <!--</ng-template>-->

      <!--<div *ngIf="conversationWrapper.messageWrapper.unread" class="ml-auto">-->
        <!--<span class="badge badge-primary p-1 ml-2">{{conversationWrapper.messageWrapper.unread}}</span>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
<!--</div>-->

<button mat-button class="contact"
        (click)="openConversation()" [ngClass]="{'unread':conversationWrapper.messageWrapper.unread}"
        [@animate]="{value:'*',params:{y:'100%'}}">

  <div fxLayout="row" fxLayoutAlign="start center" class="d-flex">

    <div class="avatar-wrapper" fxFlex="0 1 auto" fxLayoutAlign="center center">
      <app-image #logo
                 class="avatar"
                 [type]="'LOGO'"
                 [clazz]="conversationImageClazz"
                 [id]="conversationImageId"
                 [dimension]="'W40xH40'"
                 [format]="'CIRCLE'"></app-image>
    </div>

    <div fxLayout="row" fxFlex>

      <div class="pr-4" fxFlex fxLayout="column" fxLayoutAlign="center start">
        <div class="contact-name">{{conversationName}}</div>

        <div *ngIf="conversationWrapper.typingParticipants.length; else messageContent"
             class="contact-last-message">
          <div *ngIf="conversationWrapper.typingParticipants.length == 1;else multiTyping">
            {{conversationWrapper.typingParticipants[0].person.firstName}} {{'isTypingAMessage' | translate |
            lowercase}}
          </div>
          <ng-template #multiTyping>
            <div *ngFor="let item of conversationWrapper.typingParticipants">
              {{item.person.firstName}},
            </div>
            {{'areTypingMessages' | translate | lowercase}}
          </ng-template>
        </div>
        <ng-template #messageContent>
          <div class="contact-last-message">
            <app-preview-message-item [message]="conversationWrapper.messageWrapper.message"></app-preview-message-item>
          </div>
        </ng-template>

      </div>

      <div fxLayout="column" fxLayoutAlign="start end">
        <div class="contact-last-message-time">
          {{updated ? (('edited' | translate | lowercase) + ' ' + (updated | date:'dd.MM.yyyy HH:mm') )
          : (conversationWrapper.messageWrapper.message.created | date:'dd.MM.yyyy HH:mm')}}
        </div>
        <div *ngIf="conversationWrapper.messageWrapper.unread" class="mt-4 unread-message-count accent">{{conversationWrapper.messageWrapper.unread}}</div>
      </div>

    </div>

  </div>

</button>
