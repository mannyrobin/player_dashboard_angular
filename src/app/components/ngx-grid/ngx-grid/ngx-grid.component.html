<table class="table table-bordered table-hover {{class}}">
  <thead>
  <tr class="d-flex">
    <th *ngFor="let item of ngxColumnComponents.toArray()"
        (click)="onColumnClick(item)"
        class="{{item.style}}">{{item.name ? (item.name) : (item.nameKey | translate)}}
    </th>
  </tr>
  </thead>
  <tbody>
  <ngx-virtual-scroll [getItems]="onFetchItems"
                      [query]="query"
                      [windowScroll]="windowScroll">
    <ng-template let-item>
      <tr class="d-flex"
          [ngClass]="{'selected': item?.selected}"
          (click)="onSelectOrDeselectItem(item); $event.stopPropagation()"
          (dblclick)="onEdit($event,item); $event.stopPropagation()">
        <td *ngFor="let column of ngxColumnComponents.toArray()"
            class="{{column.style}}">
          <div *ngIf="column.templateRef; then linkTemplate else defaultTemplate"></div>
          <ng-template #linkTemplate
                       *ngTemplateOutlet="column.templateRef; context: {$implicit: item, column:column}"></ng-template>
          <ng-template #defaultTemplate>
            {{column.displayValue ? column.displayValue(item) : null}}
          </ng-template>
        </td>
      </tr>
    </ng-template>
  </ngx-virtual-scroll>
  </tbody>
</table>

<app-busy-button *ngIf="canEdit && enabledAdd"
                 classes="mt-2"
                 nameKey="add"
                 [click]="onAdd"></app-busy-button>
